{"filter":false,"title":"app.py","tooltip":"/scraper/app.py","undoManager":{"mark":4,"position":4,"stack":[[{"start":{"row":0,"column":0},"end":{"row":27,"column":0},"action":"insert","lines":["import requests","from datetime import datetime","import boto3","","s3 = boto3.client('s3')","BUCKET = 'newste'","","def download_and_upload(url, source_name):","    response = requests.get(url, headers={\"User-Agent\": \"Mozilla/5.0\"})","    if response.status_code == 200:","        today = datetime.now().strftime(\"%Y-%m-%d\")","        filename = f\"headlines/raw/{source_name}-{today}.html\"","        s3.put_object(","            Bucket=BUCKET,","            Key=filename,","            Body=response.text.encode('utf-8'),","            ContentType='text/html'","        )","        return f\"{source_name} saved to {filename}\"","    else:","        return f\"Failed to fetch {source_name}: {response.status_code}\"","","def handler(event=None, context=None):","    logs = []","    logs.append(download_and_upload(\"https://www.eltiempo.com/\", \"eltiempo\"))","    logs.append(download_and_upload(\"https://www.elespectador.com/\", \"elespectador\"))","    return {\"result\": logs}",""],"id":1}],[{"start":{"row":5,"column":15},"end":{"row":5,"column":16},"action":"remove","lines":["e"],"id":2},{"start":{"row":5,"column":14},"end":{"row":5,"column":15},"action":"remove","lines":["t"]},{"start":{"row":5,"column":13},"end":{"row":5,"column":14},"action":"remove","lines":["s"]}],[{"start":{"row":5,"column":12},"end":{"row":5,"column":13},"action":"remove","lines":["w"],"id":3}],[{"start":{"row":5,"column":11},"end":{"row":5,"column":12},"action":"remove","lines":["e"],"id":4},{"start":{"row":5,"column":10},"end":{"row":5,"column":11},"action":"remove","lines":["n"]}],[{"start":{"row":5,"column":10},"end":{"row":5,"column":36},"action":"insert","lines":["parcial-save-html-scrapper"],"id":10}]]},"ace":{"folds":[],"scrolltop":217.79999999999998,"scrollleft":0,"selection":{"start":{"row":24,"column":33},"end":{"row":24,"column":33},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":14,"state":"start","mode":"ace/mode/python"}},"timestamp":1749017087622,"hash":"c77bf26de96bc7a5171c0286ed934daee1a765aa"}